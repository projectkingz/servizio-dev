<section class="section">
  <div class="container">
    <p class="title">View Your Bookings</p>
    <h5>Your Offer : <%= link_to @offer.title, offer_path %></h5>
      <table class="table is-fullwidth">
        <thead>
          <tr>
            <th>Date</th>
            <th></th>
            <th>Client Name</th>
            <th>Booking Notes</th>
            <th>Budget</th>
            <th>Booked For Date</th>
            <th>Status</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <% if @bookings.blank? %>
              <tr>
                <td colspan="7" class: ><h1>NOTHING TO SHOW HERE</h1><td>
              </tr>
          <% end %>
          <% @bookings.each do |b| %>
          <tr>
            <td><%= b.created_at.strftime('%d, %b, %Y') %></td>
            <td>
              <figure class="image is-48x48">
                <%= image_tag avatar_url(b.client), class: "is-rounded" %>
              </figure>
            </td>
            <td><%= b.client.username %></td>
            <td><%= b.note %></td>
            <td>Â£ <%= b.tip_offered %></td>
            <td><%= b.booking_date.strftime('%b, %d, %Y') %></td>
            <td>
              <span class="tag <%= 'is-warning' if b.pending? %>
                                <%= 'is-success' if b.accepted? %>
                                <%= 'is-danger' if b.rejected? %>
                                <%= '' if b.withdrawn? %> ">
              <%= b.status.capitalize %>
            </td>
            <% if b.pending? %>
              <td>
                <%= link_to accept_booking_path(b), method: :put,
                                                    data: { confirm: "Are you sure ?"},
                                                    class: "button is-small is-primary is-outlined" do %>
                      <span class="icon"><i class="far fa-check-circle fa-lg"></i></span>
                      <span>Accept</span>
                <% end %>
                <%= link_to reject_booking_path(b), method: :put,
                                                    data: { confirm: "Are you sure ?"},
                                                    class: "button is-small is-danger is-outlined" do %>
                      <span class="icon"><i class="far fa-times-circle fa-lg"></i></span>
                      <span>Reject</span>
                <% end %>
              </td>
            <% elsif b.accepted? %>
              <td>
                <%= link_to accept_booking_path(b), method: :put,
                                                    data: { confirm: "Are you sure ?"},
                                                    class: "button is-small is-primary is-outlined" do %>
                      <span class="icon"><i class="far fa-check-circle fa-lg"></i></span>
                      <span>Reschedule</span>
                <% end %>
                <%= link_to reject_booking_path(b), method: :put,
                                                    data: { confirm: "Are you sure ?"},
                                                    class: "button is-small is-danger is-outlined" do %>
                      <span class="icon"><i class="far fa-times-circle fa-lg"></i></span>
                      <span>Cancel</span>
                <% end %>
              </td>
            <% end %>
          </tr>
          <% end %>
        </tbody>
      </table>
  </div>
</section>
